<script>
    import { onMount } from 'svelte'

    export let width = 20
    export let smokeTrail = false
    export let scale = 1
    export let color = "var(--color-gray-3)"

    let smoke;
    let move = false;

    onMount(() => {
        setTimeout(() => {
            move = true;
        }, 100)
        setTimeout(() => {
            smoke.remove()
        }, smokeTrail ? 2500 : 2000)
    })
</script>

<style>
    div{
        position: absolute;
        left: 40px;
        transform: translate(-50%, 0%);
        opacity: 0.5; 
    }
    .smoke{
        transition: all 2s ease 0s;
        top: 45px;
    }
    .smoke.move{
        top: 50px;
        opacity: 0;
    }
    .smokeTrail{
        transition: all 2.5s ease 0s;
        top: 60px;
        width: 20px;
    }
    .smokeTrail.move{
        top: 120px;
        opacity: 0;
        width: 15px;
    }

</style>
<div bind:this={smoke} class:smokeTrail={smokeTrail} class:smoke={!smokeTrail} class:move 
     style={`${!smokeTrail ? `width: ${width*scale}px;` : ''}`}>
    <svg width="100%"  fill={color}  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">
        <path fill={color} d="M87.861,56.171l-3.278-1.454c7.031-2.355,12.194-10.236,9.841-17.27c-2.357-7.03-9.967-10.819-16.998-8.465  l-5.39,2.65l1.865-4.357c2.071-6.102-1.2-12.726-7.301-14.795c-6.103-2.068-12.724,1.202-14.795,7.303c0,0-1.925-6.588-5.335-5.811  c-3.407,0.774-1.445,5.987-1.445,5.987c-4.221-5.816-12.36-7.11-18.178-2.889c-5.815,4.223-7.106,12.36-2.886,18.177  c0,0-4.133-2.841-7.699-0.824c-3.562,2.013-0.298,6.878-0.298,6.878c-5.24-0.759-10.105,2.872-10.864,8.111  c-0.759,5.239,2.87,10.103,8.113,10.865c0,0-1.289,2.186,0.727,4.819c2.014,2.632,6.367,1.402,6.367,1.402  c-2.324,7.043,1.501,14.635,8.541,16.958c7.044,2.324,14.632-1.503,16.959-8.544c0,0-1.656,4.127,0.82,6.139  c2.481,2.017,4.422-1.472,4.422-1.472c0.732,5.41,5.713,9.201,11.12,8.471c5.412-0.734,9.203-5.714,8.471-11.124l2.727,1.848  c6.244,4.002,14.547,2.186,18.551-4.053C95.918,68.479,94.103,60.174,87.861,56.171z M10.202,46.741  c-2.511,3.555-2.254,7.783-2.254,7.783s-2.868-5.146,1.845-9.831c2.469-2.457,6.963-2.048,6.963-2.048S12.659,43.258,10.202,46.741z   M17.49,36.273c-1.785,1.55-0.569,4.14-0.569,4.14s-2.104-2.476,0.021-4.523c1.332-1.283,3.587-1.126,3.587-1.126  S18.704,35.221,17.49,36.273z M25.762,21.563c4.916-6.348,10.239-4.916,10.239-4.916s-3.072-0.819-8.396,4.916  c-2.964,3.19-3.276,9.828-3.276,9.828S21.693,26.817,25.762,21.563z M47.685,31.394c-4.718,3.428-5.766,10.03-2.341,14.749  c0,0-3.354-2.303-6.247-0.668c-2.89,1.633-0.243,5.581-0.243,5.581c-4.252-0.616-8.199,2.332-8.815,6.583  c-0.615,4.25,2.329,8.197,6.583,8.814c0,0-0.034,0.058-0.08,0.164c-0.153,0.063-0.338,0.122-0.538,0.148  c-0.546,0.073-1.839,0.164-1.839,0.164l-0.011,0.013c-4.565-0.669-7.729-4.879-7.066-9.416c0.666-4.544,4.911-7.694,9.489-7.037  c0,0-2.849-4.219,0.261-5.966c3.112-1.745,6.722,0.717,6.722,0.717c-3.688-5.044-2.556-12.102,2.522-15.763  c4.878-3.512,11.617-2.617,15.413,1.922c0.085,0.145,0.202,0.366,0.358,0.704c0.176,0.38,0.295,0.71,0.376,0.967  c0.036,0.137,0.07,0.256,0.102,0.355c0.034,0.139,0.047,0.218,0.047,0.218l0.018-0.013c0.024,0.069,0.039,0.108,0.039,0.108  C59.011,29.021,52.406,27.97,47.685,31.394z M78.406,54.185c4.928,3.137,6.36,9.645,3.202,14.535  c-3.159,4.895-9.715,6.314-14.638,3.18l-2.155-1.448c0.58,4.238-2.413,8.143-6.683,8.718c-4.271,0.573-8.201-2.397-8.778-6.637  c0,0-0.108,0.191-0.303,0.443l0.036-1.344c0.232-0.285,0.363-0.52,0.363-0.52c0.538,3.967,4.189,6.747,8.155,6.209  c3.969-0.536,6.749-4.188,6.211-8.155l2,1.354c4.578,2.935,10.667,1.603,13.604-2.972c2.933-4.578,1.602-10.668-2.975-13.603  l-2.403-1.066c5.155-1.728,8.941-7.505,7.215-12.663c-1.729-5.157-7.309-7.936-12.464-6.208l-3.952,1.943l0.086-0.199l1.183-0.893  l4.063-1.983c5.549-1.845,11.556,1.124,13.414,6.635c1.857,5.511-2.216,11.686-7.766,13.533L78.406,54.185z">
        </path>
    </svg>
</div>
